## TIL (Today I Learned)
11월 9일 (월)
> 제가 이해한 대로 작성한 내용이다 보니, 정확한 정보가 아닐 수 있습니다.   
고쳐야 할 부분이 있다면, 편하게 얘기해 주시면 감사하겠습니다.🙏🏻

<br/>
<br/>

### TIL preview
지난번에 다 끝내지 못한 Optional을 조금 더 정리해보고,  
H.I.G에 대해서 공부했습니다.  
이러한 것을 처음 접해보니까 사실 좀 많이 어려웠고,  
활동 학습도ㅠㅠ... 어려웠.  
하지만 풀리퀘스트가 익숙해지던 것처럼 이러한 것들도  
사용해보고 찾아보고 이해하려고 노력을 여러번 하다보면!! 머릿속에 들어오겠죠?!  

---  

### Optional = enum + generic
스위프트에서 다른 언어를 사용할 수 있는데,  
다른 프로그래밍 언어인 C, Java 등에는 옵셔널 타입이 없기 때문에 이러한 언어들과의 호환을 위해서  
또 다른 이유 중 하나는 cocoaTouch Framework, iOS 프로그래밍 환경에서 생명주기에 문제가 발생하기 때문

#### 암시적 추출 옵셔널
__ ! 지금은 안들어 있는데 앞으로 꼭 들어올거야 ! __
- 이미 추출이 되어있는 상태(언래핑 없이 사용은 가능 vs 명시적 추출 옵셔널은 언래핑을 해야만 사용 가능)  
- nil을 할당하고 싶지만, 옵셔널 바인딩으로 매번 값을 추출하기 귀찮거나  
로직상으로 nil 때문에 런타임 오류가 발생하지 않을 것 같다는 확신이 들때 사용  
- 일반 값처럼 연산 가능, 일반 변수와도 연산 가능  
- 옵셔널이기 때문에 nil도 할당 가능  
- 단, nil이 할당되어 있을 때 접근하면 런타임 오류 발생  

```swift 
class Person {
 var name: String
 var age: Int?
}  

init(name: String, age: Int) {
 self.name = name
 self.age = age
}

let yagom: Person = Person(name: “야곰”, age: 100)
```

- 스위프트 언어에서는 프로퍼티가 하나라도 채워지지 않으면 개체를 만들 수 없음  
- class 안에서의 프로퍼티를 선언할 때 ? 를 사용하여 나중에 해당 프로퍼티를 추가(안 할 수도 있음)
- 혹은 ! 를 사용하여 나중에 해당 프로퍼티의 값을 꼭 넣어주어야한다는 의미를 부여(안 넣어주면 종료됨)

```swift
@IBOutlet var label: UILabel!
```

위의 내용과 비슷한 맥락으로,
interfaceBuilder에서 class안에 있는 개체와  
storyboard 안에 있는 개체를 연결해 줄 때 암시적 추출 옵셔널을 사용합니다.  
역시나 예전에 Objective-c를 고려하여 만들어, swift를 고려하지 않은 특성이지요!    
클래스에 해당하는 프로퍼티와 같은 몸체를 먼저 생성한 뒤에  
나중에 storyboard를 불러 와서 연결해주기 때문에,   
Swift의 클래스의 특성상
하나인 모든 프로퍼티의 초기값이 할당되어 있어야지만  
해당 클래스의 인스턴스를 생성할 수 있기 때문에  
만약 암시적 추출 옵셔널을 사용하지 않고  
UILabel 을 선언한다면 클래스 자체가 사용 불가가 됩니다.
그래서 나중에 storyboard에서 연결할 것을 생각하고  
일단 암시적 추출 옵셔널으로 해결합니다.  
(이때 확신이 없거나 더 안전하게 프로그래밍을 하고 싶다면 ? 도 OK)  


#### nil 병합 연산자
A ?? B  
A가 nill이 아니면 A를 반환하고, A가 nil이면 B를 반환합니다.  
```swift
let someValue: Int = optionalInt ?? 0
```

### H.I.G
#### TextView vs TextField
TextView: 여러 줄의 텍스트를 처리하는데 용이함(UIScrollView를 상속)  
 - 다중 줄의 처리를 목적으로 하기 때문에 Done이라는 이벤트 처리가 없음
 ex) 메모장에서 네비게이션 바에 별도의 버튼을 두어 Done 이벤트 처리가 되게 만듦  
TextField: 단일 줄의 텍스트를 처리하는데 용이함(UIView를 상속)
 - did done Exit 이벤트를 통해 키보드 처리가 가능


#### Accessibilitys
H.I.G에서는 Apple 기기를 사용하는 모든 사람이 앱에 액세스 할 수 있도록 요구합니다.  
주로 시력, 청력, 신체 및 운동 기술, 학습 및 문해력 등 4 가지에 대해서 말하는데,
+ 시력 — 시각 장애가 있거나 색맹이거나 초점을 맞추기 어려운 시력 문제가있을 수 있습니다.  
+ 청력 — 청각 장애가 있거나 부분적인 청력 손실이 있거나 특정 범위 내에서 소리를 듣는 데   
 어려움이있을 수 있습니다.
+ 신체 및 운동 기술 — 거동이 불편한 사람은 장치를 들거나  
 인터페이스를 누르는 데 어려움을 겪을 수 있습니다.
+ 학습 및 문해력 — 일련의 단계를 기억하는 데 어려움이 있거나  
 지나치게 복잡한 사용자 인터페이스를 처리 및 관리하기 어려울 수 있습니다.
 
사용자는 모두 같지 않고, 우리의 생각과 우리의 상태와 많이 다를 수도 있습니다.  
H.I.G.의 Accessibility의 내용을 보면서 어떻게 앱을 만들어야 할지 다시 한번 생각하게 되었습니다.  

#### RTL / LTR
ltr: 텍스트는 왼쪽에서 오른쪽으로 표시됩니다, 왼쪽에서 오른쪽으로 언어 레이아웃을 테스트합니다.  
rtl: 텍스트는 오른쪽에서 왼쪽으로 표시됩니다, 오른쪽에서 왼쪽으로 쓰는 언어 레이아웃을 테스트합니다.  
레이아웃 방향은 사용자의 언어 기본 설정에 따라 텍스트 방향을 설정합니다.  



### 묵찌빠 구현했던 후기
이름 짓기 너무 힘들다 Swift API Design Guideline에서 Naming을 다시 보자..  
하나의 함수에서 한 가지 기능만 수행하기..!!!  


#### 전역변수의 단점
1. 유지보수가 어렵다  
2. 여기저기서 접근할 수 있어서 보안에 어려움이 있음  
3. 의도치 않게 값이 변경될 수도있고...  
4. 메모리를 낭비함  

#### state와 status
-프로그래밍할 때 어떤 상태 가리키는 변수나 함수 이름을 만들 때 자주 status가 적절한지 
아니면 state가 적절한지 고민한 적이 꽤 있는데 두 단어의 차이는 아래와 같다고 한다.

+ status  
여러 결과중 하나를 명시할 때.  
결과로서의 상태를 의미한다.  
상태가 완료 것.  

+ state  
일련된 과정중에 특정 상태를 명시할 때.  
현재의 상태를 의미한다.  
상태가 계속 바뀌는 것  

ex) '동기화 전' -> '동기화 중' -> '동기화 완료'는 'state'
'success' 또는 'fail' 과 같은 결과를 나타날 때는 'status'입니다.

### 기타 여러가지 것들!
#### assert
- 테스트 코드로 사용(디버깅 중 조건의 검증 용)  
- 앱을 배포하면 작동하지 않음, 디버깅에만 동작함  
- 조건을 만족하면 지나가고, 만족하지 않으면 입력한 문자를 출력  

#### exit(0)
```
Q. 코드 상에서 앱 종료하고 싶어요!  

A. 그런 API 는 없단다. iOS 에선 보통 홈버튼으로 나가잖니.  
앱에 너가 원하는 기능을 제공 못할때에 대한 상태를 관리하렴.   
추천하는 방법은 알림을 띄워서 유저가 자연스럽게 알아채게 해  
그럼 유저가 알아서 와이파이를 켜던, 뭘 하든 액션을 취하겠지??  

Warning: exit 함수 호출하지마. exit 쓰면 강제종료된 것 처럼 보인단말야 ㅎㅎ  
홈 버튼과 같은 역할을 하는 suspend 를 이용하고,  
exit 을 호출하는 앱은 Appstore 심사 리젝 대상이야.  

> 해결방법:
앱이 종료되어야 할 상황에 팝업 출력   
팝업의 나가기 버튼을 눌렀을 때 suspend  
해당 상황에 팝업을 띄워 유저가 알아 챌 수 있도록 하였다.  
그리고, 팝업의 버튼을 누르는 경우 아래 코드를 실행시킨다.  
UIControl().sendAction(#selector(URLSessionTask.suspend), to: UIApplication.shared, for: nil)
```

---

<br/>
<br/>


### TIL summary && impression
2번의 리팩토링을 거치며
작은 프로젝트이기 때문에 한 번에 갈아엎는게 가능했지만,  
규모가 커질수록 이렇게 진행하기는 어려울 것 같습니다.  
그래서 처음부터 코드를 함수 단위로 작게 나눠 둔다면  
코드 몸통을 통채로 도려내는 수술의 빈도가 줄어들것이라고 야곰이 조언해 줬습니다!  
다음 코드를 짜면서는 이러한 부분에 좀 더 신경을 쓰면서 진행해보겠습니닷!  


<br/>
<br/>
<br/>

##### 참고 링크

https://jinshine.github.io/2018/05/24/Swift/8.%EC%98%B5%EC%85%94%EB%84%90(Optionals)/ // Optional 
https://developer.apple.com/design/human-interface-guidelines/sf-symbols/overview/ // symbols  
https://wotjd.github.io/2019/06/ios-%EC%95%B1-%EC%A2%85%EB%A3%8C%ED%95%98%EA%B8%B0-how-to-quit-app-in-swift/ // iOS 앱 종료하기  
https://starkapin.tistory.com/68 // TextView vs TextField  
https://developer.apple.com/documentation/accessibility // accessibility  


[다음 TIL 보기](https://github.com/lina0322/yagom_iOS_camp/blob/main/TIL/2020_11/2020_11_12.md)
